<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor - Rarry</title>

  <link href="src/index.css" rel="stylesheet" />
  <link href="src/editor.css" rel="stylesheet" />

  <meta name="author" content="ddededodediamante">
  <meta name="description" content="Create and share games using visual block-coding, powered by Blockly.">
  <meta name="keywords" content="Rarry, block coding, Scratch, visual programming, game maker, online coding">
  <meta name="theme-color" content="#3b82f6">
  <meta property="og:title" content="Rarry">
  <meta property="og:image" content="icons/Rarry.svg">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Rarry">
  <meta name="twitter:description" content="Create and share games using visual block-coding, powered by Blockly.">
  <meta name="twitter:image" content="icons/Rarry.svg">
</head>

<body>
  <header>
    <div>
      <img src="icons/Rarry.svg" alt="Rarry logo" class="logo" onclick="location.href='/'" style="cursor: pointer;">
      <button id="theme-button">
        <i class="fa-solid fa-paintbrush"></i>
        Appearance
      </button>
    </div>
    <div>
      <button id="save-button">
        <i class="fa-solid fa-file-arrow-up"></i>
        Save
      </button>
      <button id="load-button">
        <i class="fa-solid fa-file-arrow-down"></i>
        Load
      </button>
      <input type="file" id="load-input" class="hidden" accept=".rarryz, .rarry" />
      <button id="liveshare-button">
        <i class="fa-solid fa-share-from-square"></i>
        Live Share
      </button>
    </div>
  </header>

  <div class="main">
    <div class="left-panel">
      <div class="tab-header">
        <button class="tab-button" data-tab="code">Code</button>
        <button class="tab-button inactive" data-tab="costumes">Costumes</button>
        <button class="tab-button inactive" data-tab="sounds">Sounds</button>
      </div>

      <div id="code-tab" class="tab-content active">
        <div id="blocklyDiv"></div>
      </div>

      <div id="costumes-tab" class="tab-content tab-section">
        <h2>Costumes</h2>
        <div id="costumes-list"></div>
        <input type="file" id="costume-upload" accept="image/*">
      </div>

      <div id="sounds-tab" class="tab-content tab-section">
        <h2>Sounds</h2>
        <div id="sounds-list"></div>
        <input type="file" id="sound-upload" accept="audio/*" />
      </div>
    </div>

    <div class="right-panel">
      <div id="stage-div">
        <div id="stage-controls">
          <button id="run-button">
            <img src="icons/flag.svg">
          </button>
          <button id="stop-button">
            <img src="icons/stop.svg">
          </button>
          <button id="fullscreen-button">
            <img src="icons/fullscreen.svg">
          </button>
        </div>

        <div id="stage-wrapper">
          <div id="stage"></div>
        </div>
      </div>

      <div id="sprite-info">
        <p>Loading...</p>
      </div>

      <div id="sprites-section">
        <h3>Sprites</h3>
        <div id="sprites-list"></div>
        <div id="sprites-section-buttons">
          <button id="add-sprite-button" class="primary">
            <i class="fa-solid fa-plus"></i>
            Add Sprite
          </button>
          <button id="delete-sprite-button" class="danger">
            <i class="fa-solid fa-xmark"></i>
            Delete Sprite
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="extensions-popup hidden" id="extensions-popup">
    <header>
      <h2>Extensions List</h2>
      <button id="extensions-custom-button" class="orange">
        <i class="fa-solid fa-plus"></i>
        Load Custom
      </button>
      <button class="danger" onclick="document.getElementById('extensions-popup').classList.add('hidden')">
        <i class="fa-solid fa-xmark"></i>
        Close
      </button>
    </header>

    <div class="extensions-list"></div>
  </div>

  <xml id="toolbox" style="display: none">
    <category name="Events" colour="#ffc400">
      <block type="when_flag_clicked"></block>
      <block type="project_timer"></block>
      <sep gap="50"></sep>
      <block type="when_key_clicked"></block>
      <block type="when_stage_clicked"></block>
      <block type="when_timer_reaches"></block>
      <block type="every_seconds"></block>
      <sep gap="50"></sep>
      <block type="when_custom_event_triggered"></block>
      <block type="trigger_custom_event"></block>
    </category>

    <category name="Control" colour="#FFAB19">
      <block type="wait_one_frame"></block>
      <block type="wait_block">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="controls_if"></block>
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
      <block type="controls_flow_statements"></block>
      <block type="controls_stopblock"></block>
      <sep gap="50"></sep>
      <block type="controls_whenstartasclone"></block>
      <block type="controls_createclone">
        <value name="ID">
          <shadow type="controls_sprites_menu"></shadow>
        </value>
      </block>
      <block type="controls_delete_all_clones">
        <value name="ID">
          <shadow type="controls_sprites_menu"></shadow>
        </value>
      </block>
      <block type="controls_delete_this_clone"></block>
      <block type="controls_is_clone"></block>
      <block type="controls_clone_count">
        <value name="ID">
          <shadow type="controls_sprites_menu"></shadow>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="controls_run_instantly"></block>
      <block type="controls_thread_current"></block>
      <block type="controls_thread_create"></block>
      <block type="controls_thread_set_var">
        <value name="THREAD">
          <shadow type="controls_thread_current"></shadow>
        </value>
        <value name="NAME">
          <shadow type="text">
            <field name="TEXT">name</field>
          </shadow>
        </value>
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block>
      <block type="controls_thread_get_var">
        <value name="THREAD">
          <shadow type="controls_thread_current"></shadow>
        </value>
        <value name="NAME">
          <shadow type="text">
            <field name="TEXT">name</field>
          </shadow>
        </value>
      </block>
    </category>

    <category name="Functions" colour="#FF6680" custom="FUNCTIONS_CATEGORY"></category>

    <sep></sep>

    <category name="Motion" colour="#4C97FF">
      <block type="move_steps">
        <value name="STEPS">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="goto_position">
        <value name="x">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
        <value name="y">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block>
      <block type="set_position">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="change_position">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="get_position"></block>
      <sep gap="50"></sep>
      <block type="point_towards">
        <value name="x">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
        <value name="y">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block>
      <block type="angle_set">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">15</field>
          </shadow>
        </value>
      </block>
      <block type="angle_turn">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">15</field>
          </shadow>
        </value>
      </block>
      <block type="get_angle"></block>
    </category>

    <category name="Looks" colour="#9966FF">
      <block type="looks_setVisibility_sprite">
        <value name="VISIBLE">
          <shadow type="logic_boolean"></shadow>
        </value>
      </block>
      <block type="looks_isVisible"></block>
      <sep gap="50"></sep>
      <block type="say_message">
        <value name="MESSAGE">
          <shadow type="text">
            <field name="TEXT">Hello!</field>
          </shadow>
        </value>
      </block>
      <block type="say_message_duration">
        <value name="MESSAGE">
          <shadow type="text">
            <field name="TEXT">Hello!</field>
          </shadow>
        </value>
        <value name="DURATION">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="switch_costume">
        <value name="COSTUME">
          <shadow type="text">
            <field name="TEXT">default</field>
          </shadow>
        </value>
      </block>
      <block type="get_costume_size"></block>
      <sep gap="50"></sep>
      <block type="set_size">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="change_size">
        <value name="AMOUNT">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="get_sprite_scale"></block>
    </category>

    <category name="Sounds" colour="#ff66ba">
      <block type="play_sound">
        <value name="name">
          <shadow type="text">
            <field name="TEXT">hey</field>
          </shadow>
        </value>
      </block>
      <block type="stop_sound">
        <value name="name">
          <shadow type="text">
            <field name="TEXT">hey</field>
          </shadow>
        </value>
      </block>
      <block type="stop_all_sounds"></block>
      <sep gap="50"></sep>
      <block type="set_sound_property">
        <value name="value">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="get_sound_property"></block>
    </category>

    <sep></sep>

    <category name="Operators" colour="#59ba57">
      <label text="Logic"></label>

      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="logic_ternary"></block>

      <label text="Math"></label>

      <block type="math_number">
        <field name="NUM">0</field>
      </block>
      <block type="math_arithmetic">
        <value name="A">
          <shadow type="math_number">
            <field name="NUM">5</field>
          </shadow>
        </value>
        <value name="B">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <block type="math_single">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="math_trig">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM">45</field>
          </shadow>
        </value>
      </block>
      <block type="math_constant"></block>
      <block type="math_number_property">
        <value name="NUMBER_TO_CHECK">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="math_round">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM">1.5</field>
          </shadow>
        </value>
      </block>
      <block type="math_on_list"></block>
      <block type="math_modulo">
        <value name="DIVIDEND">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
        <value name="DIVISOR">
          <shadow type="math_number">
            <field name="NUM">6</field>
          </shadow>
        </value>
      </block>
      <block type="math_constrain">
        <value name="LOW">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
        <value name="HIGH">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
        <value name="TO">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="math_random_float"></block>

      <label text="Text"></label>

      <block type="text"></block>
      <block type="text_join"></block>
      <block type="text_length"></block>
      <block type="text_isEmpty"></block>
      <block type="text_indexOf"></block>
      <block type="text_charAt"></block>
      <block type="text_getSubstring"></block>
      <block type="text_changeCase"></block>
      <block type="text_trim"></block>
      <block type="text_print"></block>
      <block type="text_prompt_ext"></block>
    </category>

    <category name="System" colour="#5CB1D6">
      <block type="key_pressed"></block>
      <block type="all_keys_pressed"></block>
      <sep gap="50"></sep>
      <block type="mouse_button_pressed"></block>
      <block type="mouse_over"></block>
      <block type="get_mouse_position"></block>
      <sep gap="50"></sep>
      <block type="window_size"></block>
    </category>

    <category name="Lists" colour="#e35340">
      <block type="lists_create_with">
        <mutation items="2"></mutation>
      </block>
      <block type="lists_repeat">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM">5</field>
          </shadow>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="lists_length"></block>
      <block type="lists_isEmpty"></block>
      <block type="lists_indexOf"></block>
      <block type="lists_find">
        <value name="item">
          <shadow type="lists_filter_item"></shadow>
        </value>
        <value name="method">
          <block type="logic_compare">
            <field name="OP">EQ</field>
          </block>
        </value>
      </block>
      </value>
      <block type="lists_getIndex_modified"></block>
      <block type="lists_setIndex_modified"></block>
      <block type="lists_getSublist"></block>
      <block type="lists_split">
        <value name="DELIM">
          <shadow type="text">
            <field name="TEXT">,</field>
          </shadow>
        </value>
      </block>
      <block type="lists_merge"></block>
      <block type="lists_sort"></block>
      <block type="lists_filter">
        <value name="item">
          <shadow type="lists_filter_item"></shadow>
        </value>
        <value name="method">
          <block type="logic_compare">
            <field name="OP">EQ</field>
          </block>
        </value>
      </block>
      <block type="lists_map">
        <value name="item">
          <shadow type="lists_filter_item"></shadow>
        </value>
        <value name="method">
          <block type="lists_filter_item"></block>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="lists_foreach">
        <value name="ITEM">
          <shadow type="lists_filter_item"></shadow>
        </value>
        <value name="INDEX">
          <shadow type="lists_foreach_index"></shadow>
        </value>
      </block>
    </category>

    <category name="Objects" colour="#ff8349">
      <block type="json_create_statement"></block>
      <block type="json_key_value_statement">
        <value name="KEY">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
        <value name="VALUE">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
      </block>
      <sep gap="50"></sep>
      <block type="json_length"></block>
      <block type="json_isEmpty"></block>
      <block type="json_has_key">
        <value name="KEY">
          <shadow type="text">
            <field name="TEXT">key</field>
          </shadow>
        </value>
      </block>
      <block type="json_get">
        <value name="KEY">
          <shadow type="text">
            <field name="TEXT">key</field>
          </shadow>
        </value>
      </block>
      <block type="json_set_return">
        <value name="KEY">
          <shadow type="text">
            <field name="TEXT">key</field>
          </shadow>
        </value>
      </block>
      <block type="json_delete_return">
        <value name="KEY">
          <shadow type="text">
            <field name="TEXT">key</field>
          </shadow>
        </value>
      </block>
      <block type="json_property_list"></block>
      <block type="json_parse"></block>
      <block type="json_clone"></block>
    </category>

    <category name="Variables" colour="#FF8C1A" custom="GLOBAL_VARIABLES"></category>
  </xml>

  <script type="module" src="src/scripts/editor.js"></script>
</body>

</html>